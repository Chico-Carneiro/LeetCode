/**
 * @param {number[][]} board
 * @return {number}
 */

 //var slidingPuzzle = function (board) {
    //const memo = new Map([[870037764750, 0], [2005817609250, 1], [15291783753246, 1], [42477177092350, 2], [12231226829250, 2], [26967103413250, 2], [5824894337262, 3], [40450655119875, 3], [42809293902375, 3], [64091213550, 3], [63715765638525, 3], [424594856400, 4], [38828131650, 4], [390820265550, 4], [19026352845500, 4], [269558718000, 4], [49025418750, 4], [68473518750, 5], [109160142000, 5], [105261565500, 5], [4109692214628, 5], [1367870929425, 5], [262478169954, 5], [44309974800, 5], [26844140400, 6], [162469907600, 6], [3375490868750, 6], [180131151200, 6], [34589362500, 6], [45657958500, 6], [165411031500, 6], [47348994000, 6], [400253854000, 6], [417543018750, 6], [1461400565625, 7], [86454832464, 7], [2026285135875, 7], [832205918544, 7], [802484278596, 7], [67475362500, 7], [996559200, 7], [64847214432, 7], [5063236303125, 7], [58489166736, 7], [822503907225, 7], [181466389104, 7], [302443981840, 8], [1566021600, 8], [3327786000, 8], [33740850000, 8], [3689532000, 8], [603741600, 8], [106032712500, 8], [3326285462500, 8], [6192008322500, 8], [1387009864240, 8], [727650000, 8], [433007575000, 8], [2395575000, 9], [33670669032, 9], [859950000, 9], [2092774320, 9], [7021737437715, 9], [9342742500, 9], [13932018725625, 9], [258651957564, 9], [7484142290625, 9], [1298900728125, 9], [4081293216, 9], [7197372000, 9], [8695050000, 9], [3932838000, 9], [6135227280, 9], [1531122658065, 9], [2915209440, 10], [4392677520, 10], [58790057040, 10], [37685934000, 10], [52874822000, 10], [6225450000, 10], [31881850000, 10], [11310156000, 10], [96764668000, 10], [31491460000, 10], [384859475000, 10], [2138326368750, 10], [5660077500, 10], [3980576778750, 10], [14681452500, 10], [573203056140, 10], [1267857360, 10], [5167871280, 10], [2123550000, 10], [42392350000, 10], [4980868200, 10], [1715175000, 10], [3764475000, 10], [161401865625, 11], [203786390808, 11], [9716452200, 11], [3296429136, 11], [214611271875, 11], [318665221875, 11], [775503683955, 11], [59818465980, 11], [179847793125, 11], [415406013750, 11], [551048793750, 11], [104961675000, 11], [29926672776, 11], [638820000, 11], [239138274375, 11], [20901168288, 11], [734806697625, 11], [5940305996625, 11], [2479132656, 11], [739669122192, 11], [11420961552, 11], [267678786375, 11], [5655245470875, 11], [8822182934565, 11], [751252320, 11], [537878880, 12], [135791175520, 12], [2613980128760, 12], [2513442431500, 12], [509652000, 12], [1232781870320, 12], [366735600, 12], [2640135998500, 12], [209944770750, 12], [457380000, 12], [68325221250, 12], [1003860000, 12], [654885000, 12], [53805675000, 12], [259191075000, 12], [282479793750, 12], [7408544893750, 12], [251663816250, 12], [5584903073750, 12], [23683660000, 12], [36239589540, 12], [10812372350780, 12], [102123941920, 12], [94419325000, 12], [17519287500, 12], [15268710600, 12], [6439688655400, 12], [1572425855000, 12], [116957295000, 13], [5306937260625, 13], [2318287915944, 13], [21733949211975, 13], [654645966975, 13], [4514737500, 13], [7022925000, 13], [7342046712, 13], [7595995680, 13], [61274365152, 13], [6487423410468, 13], [24327837789255, 13], [94222932804, 13], [6459180000, 13], [3069402336, 13], [723803438358, 13], [8377354610625, 13], [11500432409466, 13], [576088450938, 13], [11112817340625, 13], [33562486419462, 13], [6392854556088, 13], [773955000, 13], [527246094375, 13], [17607476250, 13], [85018956750, 13], [720037090500, 13], [570269375676, 13], [433414800, 13], [91694519280, 13], [6240958218495, 13], [206388000, 13], [3792379500, 13], [542903565204, 13], [3944074680, 13], [1568388077256, 13], [81474705312, 13], [1031164239105, 13], [1398485088, 13], [10790780000, 14], [24050477880, 14], [12052471200, 14], [232010070600, 14], [2823864120, 14], [208809063540, 14], [3208936500, 14], [23125459500, 14], [174636000, 14], [37305268000, 14], [145561707720, 14], [39773154960, 14], [355817507760, 14], [1681851600, 14], [287250563600, 14], [12479197500, 14], [369106930500, 14], [6899666416500, 14], [43582596750, 14], [56347275734750, 14], [12606536250, 14], [11669554146250, 14], [156221065000, 14], [1911195000, 14], [512947435000, 14], [10654757593480, 14], [93229128942950, 14], [31945645581850, 14], [15950220000, 14], [41181351750, 14], [3913140000, 14], [727028802500, 14], [46319438880, 14], [3486252000, 14], [4601852640, 14], [5942475000, 14], [42824925000, 14], [3820162500, 14], [816052737500, 14], [86208522400, 14], [6209699774850, 14], [50731065000, 14], [1516267788750, 14], [183790035000, 14], [7879997750625, 15], [614025798750, 15], [648033381450, 15], [23511415200, 15], [31035068064, 15], [63456260868, 15], [1836118659375, 15], [453887870436, 15], [706047798456, 15], [11964816864, 15], [4869228000, 15], [14748142500, 15], [1635814805625, 15], [178821106464, 15], [57517755750, 15], [47918468372775, 15], [515781670950, 15], [139843693414425, 15], [58946476680, 15], [35959806877995, 15], [66477987576, 15], [1731197593125, 15], [81942485625, 15], [42605745000, 15], [20246250024, 15], [1512374217354, 15], [17504331219375, 15], [12171011558706, 15], [84520913602125, 15], [766007720478, 15], [103410202896, 15], [1454205978225, 15], [252382855725, 15], [53394864758235, 15], [8057937888, 15], [283286878875, 15], [56400267924, 15], [481396226220, 15], [534884695800, 15], [802620000, 15], [679140000, 16], [3114540000, 16], [3261660487800, 16], [1961243884600, 16], [2935494439020, 16], [23731051003660, 16], [725312087500, 16], [3099206880, 16], [33235602400, 16], [33917340600, 16], [9850922331250, 16], [266338091250, 16], [408264285000, 16], [223723996650, 16], [2995007400, 16], [30504705000, 16], [141322252500, 16], [25568456760, 16], [2001473481150, 16], [91235258400, 16], [551156784750, 16], [10396511875750, 16], [298035177440, 16], [29691948000, 16], [17853836000, 16], [3502221222500, 16], [24406254180, 16], [332196237450, 16], [30269197708750, 16], [3922888023054, 17], [45403796563125, 17], [2245646565162, 17], [47610615780, 17], [955151242500, 17], [3856428576, 17], [135577567125, 17], [15594767813625, 17], [6045792480, 17], [2263204628685, 17], [1929048746625, 17], [7005157184025, 17], [1393991807208, 17], [3539554200, 17], [54499331250, 17], [14776383496875, 17], [674200800, 17], [197812387500, 17], [1631952196875, 17], [14238630602196, 17], [6619198110525, 17], [44109608400, 18], [119839912500, 18], [10875150000, 18], [1206235387500, 18], [570477600, 18], [4111192800, 18], [33017118750, 18], [134579981250, 18], [639785346200, 18], [2323319678680, 18], [1383734752400, 18], [381046666000, 18], [184751398260, 18], [14929405920, 18], [903474000, 18], [414303697500, 18], [3706432372500, 18], [31554474411460, 18], [18932684646876, 19], [70997567425785, 19], [574938000, 19], [7841203915545, 19], [82306079856, 19], [28069750800, 19], [498144510864, 19], [172808901720, 19], [230322724632, 19], [2159275543425, 19], [471029934375, 19], [6920550000, 19], [4192650000, 20], [93042950000, 20], [88585663320, 20], [1655919939960, 20], [12175455600, 20], [411642000, 20], [7235019792, 21]]);
    const memo = new Map([["123450", 0], ["123405", 1], ["120453", 1], ["102453", 2], ["123045", 2], ["103425", 2], ["130425", 3], ["013425", 3], ["023145", 3], ["152403", 3], ["012453", 3], ["412053", 4], ["152430", 4], ["152043", 4], ["203145", 4], ["413025", 4], ["135420", 4], ["135402", 5], ["413205", 5], ["243105", 5], ["230145", 5], ["052143", 5], ["150432", 5], ["412503", 5], ["412530", 6], ["402513", 6], ["105432", 6], ["502143", 6], ["235140", 6], ["243150", 6], ["243015", 6], ["413250", 6], ["403215", 6], ["135042", 6], ["035142", 7], ["430215", 7], ["043215", 7], ["410253", 7], ["240153", 7], ["235104", 7], ["542103", 7], ["520143", 7], ["015432", 7], ["420513", 7], ["042513", 7], ["410532", 7], ["401532", 8], ["542013", 8], ["423510", 8], ["415032", 8], ["523140", 8], ["542130", 8], ["235014", 8], ["205134", 8], ["204153", 8], ["401253", 8], ["435210", 8], ["305142", 8], ["345102", 9], ["350142", 9], ["435201", 9], ["451203", 9], ["041253", 9], ["254103", 9], ["024153", 9], ["250134", 9], ["025134", 9], ["035214", 9], ["540132", 9], ["523104", 9], ["415302", 9], ["423501", 9], ["431502", 9], ["041532", 9], ["541032", 10], ["431520", 10], ["431052", 10], ["423051", 10], ["403521", 10], ["415320", 10], ["405312", 10], ["523014", 10], ["503124", 10], ["504132", 10], ["305214", 10], ["125034", 10], ["254130", 10], ["124053", 10], ["254013", 10], ["241053", 10], ["451230", 10], ["451023", 10], ["435021", 10], ["405231", 10], ["352140", 10], ["345120", 10], ["345012", 10], ["045312", 11], ["340125", 11], ["352104", 11], ["450231", 11], ["045231", 11], ["035421", 11], ["051423", 11], ["241503", 11], ["054213", 11], ["124503", 11], ["125304", 11], ["315204", 11], ["350214", 11], ["534102", 11], ["054132", 11], ["530124", 11], ["053124", 11], ["023514", 11], ["450312", 11], ["410325", 11], ["430521", 11], ["043521", 11], ["023451", 11], ["031452", 11], ["541302", 11], ["541320", 12], ["501342", 12], ["301452", 12], ["203451", 12], ["543021", 12], ["401325", 12], ["452310", 12], ["203514", 12], ["153024", 12], ["534120", 12], ["154032", 12], ["534012", 12], ["354210", 12], ["315240", 12], ["315024", 12], ["125340", 12], ["105324", 12], ["124530", 12], ["104523", 12], ["504213", 12], ["241530", 12], ["201543", 12], ["501423", 12], ["305421", 12], ["245031", 12], ["352014", 12], ["302154", 12], ["304125", 12], ["324105", 13], ["034125", 13], ["320154", 13], ["032154", 13], ["052314", 13], ["245301", 13], ["325401", 13], ["350421", 13], ["521403", 13], ["510423", 13], ["210543", 13], ["021543", 13], ["240531", 13], ["514203", 13], ["540213", 13], ["140523", 13], ["014523", 13], ["120534", 13], ["150324", 13], ["015324", 13], ["120345", 13], ["310245", 13], ["354201", 13], ["034512", 13], ["154302", 13], ["153204", 13], ["213504", 13], ["230514", 13], ["452301", 13], ["421305", 13], ["041325", 13], ["543201", 13], ["253401", 13], ["230451", 13], ["351402", 13], ["310452", 13], ["510342", 13], ["051342", 13], ["540321", 13], ["504321", 14], ["351042", 14], ["512340", 14], ["312450", 14], ["351420", 14], ["231450", 14], ["253410", 14], ["253041", 14], ["543210", 14], ["503241", 14], ["341025", 14], ["421350", 14], ["421035", 14], ["452031", 14], ["402351", 14], ["234510", 14], ["213540", 14], ["213054", 14], ["153240", 14], ["103254", 14], ["154320", 14], ["104352", 14], ["304512", 14], ["354021", 14], ["304251", 14], ["301245", 14], ["102345", 14], ["102534", 14], ["514023", 14], ["143520", 14], ["514230", 14], ["204531", 14], ["521043", 14], ["513420", 14], ["521430", 14], ["325410", 14], ["325041", 14], ["245310", 14], ["205341", 14], ["502314", 14], ["132054", 14], ["324150", 14], ["134025", 14], ["324015", 14], ["024315", 15], ["134205", 15], ["132504", 15], ["512304", 15], ["520314", 15], ["250341", 15], ["025341", 15], ["240315", 15], ["320415", 15], ["520431", 15], ["513402", 15], ["234501", 15], ["024531", 15], ["510234", 15], ["143502", 15], ["012534", 15], ["142305", 15], ["012345", 15], ["341205", 15], ["031245", 15], ["340251", 15], ["034251", 15], ["054321", 15], ["314502", 15], ["340512", 15], ["140352", 15], ["014352", 15], ["130254", 15], ["013254", 15], ["150243", 15], ["420351", 15], ["042351", 15], ["052431", 15], ["021435", 15], ["530241", 15], ["053241", 15], ["250413", 15], ["231405", 15], ["312405", 15], ["524301", 15], ["524310", 16], ["524031", 16], ["312045", 16], ["302415", 16], ["231045", 16], ["201435", 16], ["205413", 16], ["531240", 16], ["502431", 16], ["342051", 16], ["105243", 16], ["134250", 16], ["314052", 16], ["142350", 16], ["342510", 16], ["314520", 16], ["234051", 16], ["341250", 16], ["142035", 16], ["512034", 16], ["143052", 16], ["103542", 16], ["501234", 16], ["513042", 16], ["503412", 16], ["204315", 16], ["251340", 16], ["132540", 16], ["104235", 16], ["140235", 17], ["014235", 17], ["130542", 17], ["251304", 17], ["214305", 17], ["530412", 17], ["053412", 17], ["013542", 17], ["531204", 17], ["051234", 17], ["043152", 17], ["042135", 17], ["310524", 17], ["342501", 17], ["145203", 17], ["015243", 17], ["532401", 17], ["215403", 17], ["025413", 17], ["210435", 17], ["032415", 17], ["432015", 18], ["215430", 18], ["425013", 18], ["215043", 18], ["532410", 18], ["532041", 18], ["145230", 18], ["145023", 18], ["302541", 18], ["301524", 18], ["402135", 18], ["403152", 18], ["251034", 18], ["531024", 18], ["453012", 18], ["214350", 18], ["214035", 18], ["201354", 18], ["210354", 19], ["021354", 19], ["453102", 19], ["031524", 19], ["430152", 19], ["432105", 19], ["420135", 19], ["321504", 19], ["320541", 19], ["032541", 19], ["045123", 19], ["425103", 19], ["425130", 20], ["405123", 20], ["321540", 20], ["321054", 20], ["432150", 20], ["453120", 20], ["450123", 21]]);
    
var slidingPuzzle = function (board) {
    const hash = hashArr(board.flat());
    if (memo.has(hash)) return memo.get(hash);
    return -1;
};
var slidingPuzzle1 = function (board) {
    let b = board.flat();
    const memo = findAllValidBoards();
    const hash = hashArr(b);
    if (memo.has(hash)) return memo.get(hash);
    return -1;
};

function hashArr(arr) {
    return arr.join("");
    //return 2 ** arr[0] * 3 ** arr[1] * 5 ** arr[2] * 7 ** arr[3] * 11 ** arr[4] * 13 ** arr[5];
}

function findAllValidBoards() {
    const memo = new Map();
    const arr = [1, 2, 3, 4, 5, 0];
    const nextPos = [[1, 3], [0, 2, 4], [1, 5], [0, 4], [1, 3, 5], [2, 4]];
    const zeroPos = 5;
    //let zeroPos = b.findIndex(a=>a==0);

    //const obj = { arr, zeroPos };
    const obj = [arr, zeroPos];

    let stack1 = [obj];
    let stack2 = [];

    let moves = 0;

    while (stack1.length > 0) {
        while (stack1.length > 0) {
            //const { arr, zeroPos } = stack1.pop();
            const [arr, zeroPos] = stack1.pop();
            const key = hashArr(arr);
            if (!memo.has(key)) {
                memo.set(key, moves);
                for (let pos of nextPos[zeroPos]) {
                    const otherArr = arr.slice();
                    [otherArr[zeroPos], otherArr[pos]] = [otherArr[pos], otherArr[zeroPos]];
                    //stack2.push({ "arr": otherArr, "zeroPos": pos });
                    stack2.push([otherArr, pos]);
                }
            }
        }
        [stack1, stack2] = [stack2, stack1];
        moves++;
    }
    return memo;

}
